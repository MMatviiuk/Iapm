# IAPM Android Application

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
android/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ src/main/java/com/iapm/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ local/           # Room database (SQLite)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ remote/          # Supabase API
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repository/      # Repository pattern
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model/           # Data models
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usecase/         # Business logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/      # UI Components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ screens/         # Screens
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ navigation/      # Navigation
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ theme/           # Theme
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ receivers/           # Broadcast receivers
‚îÇ   ‚îî‚îÄ‚îÄ build.gradle
‚îú‚îÄ‚îÄ build.gradle
‚îú‚îÄ‚îÄ settings.gradle
‚îî‚îÄ‚îÄ gradle.properties
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. Supabase Backend
- **Authentication**: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ email/password
- **Database**: PostgreSQL —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ª–µ–∫–∞—Ä—Å—Ç–≤, –∏—Å—Ç–æ—Ä–∏–∏
- **Realtime**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **Storage**: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –ª–µ–∫–∞—Ä—Å—Ç–≤

### 2. –õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Room)
- **Offline —Ä–µ–∂–∏–º**: SQLite –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Supabase
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 3. Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **WorkManager**: –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- **AlarmManager**: –¢–æ—á–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–∏–µ–º–µ –ª–µ–∫–∞—Ä—Å—Ç–≤
- **Notifications**: –°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase**:
   ```sql
   -- –í—ã–ø–æ–ª–Ω–∏—Ç—å supabase_schema.sql –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ Supabase
   -- –ü–æ–ª—É—á–∏—Ç—å URL –∏ anon –∫–ª—é—á
   ```

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Android**:
   ```kotlin
   // app/build.gradle
   buildConfigField "String", "SUPABASE_URL", "\"https://your-project.supabase.co\""
   buildConfigField "String", "SUPABASE_ANON_KEY", "\"your-anon-key\""
   ```

3. **–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞**:
   ```bash
   cd android
   ./gradlew assembleDebug
   ./gradlew installDebug
   ```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Clean Architecture
- **Presentation Layer**: UI (Compose)
- **Domain Layer**: Business logic (Use cases)
- **Data Layer**: Repository (Local + Remote)

### MVVM + Repository Pattern
- **ViewModel**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º UI
- **Repository**: –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
- **Use Cases**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### Dependency Injection
- **Hilt**: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **Modules**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è DI

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –û—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ SQLite
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç resolution –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### 2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- Incremental sync (—Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
- Background sync —á–µ—Ä–µ–∑ WorkManager
- Conflict resolution (last write wins)

### 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –¢–æ—á–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–∏–µ–º–µ –ª–µ–∫–∞—Ä—Å—Ç–≤
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏)
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- Row Level Security (RLS) –≤ Supabase
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- OAuth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (Google, Apple)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Unit —Ç–µ—Å—Ç—ã
./gradlew test

# Integration —Ç–µ—Å—Ç—ã
./gradlew connectedAndroidTest

# UI —Ç–µ—Å—Ç—ã
./gradlew composeUiTest
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å Android –ø—Ä–æ–µ–∫—Ç
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase —Å—Ö–µ–º—É
3. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
4. üîÑ –°–æ–∑–¥–∞—Ç—å Repository —Å–ª–æ–π
5. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å UI —ç–∫—Ä–∞–Ω—ã
6. üîÑ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
7. üîÑ –î–æ–±–∞–≤–∏—Ç—å push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è