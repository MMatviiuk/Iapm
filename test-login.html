<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–¢–µ—Å—Ç –ª–æ–≥—ñ–Ω—É - 120+</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #1d4ed8;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
        }
        .success {
            background: #d1fae5;
            color: #065f46;
        }
        .error {
            background: #fee2e2;
            color: #991b1b;
        }
        pre {
            background: #f9fafb;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –ª–æ–≥—ñ–Ω—É</h1>

    <div class="test-section">
        <h2>1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ localStorage</h2>
        <button onclick="checkStorage()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
        <button onclick="createDemoUsers()">–°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–µ–º–æ users</button>
        <button onclick="clearStorage()">–û—á–∏—Å—Ç–∏—Ç–∏</button>
        <div id="storage-result"></div>
    </div>

    <div class="test-section">
        <h2>2. –¢–µ—Å—Ç –ª–æ–≥—ñ–Ω—É</h2>
        <button onclick="testLogin('patient@demo.com', 'demo123')">Patient</button>
        <button onclick="testLogin('caregiver@demo.com', 'demo123')">Caregiver</button>
        <button onclick="testLogin('doctor@demo.com', 'demo123')">Doctor</button>
        <div id="login-result"></div>
    </div>

    <script>
        function checkStorage() {
            const users = JSON.parse(localStorage.getItem('mock_users') || '[]');
            const result = document.getElementById('storage-result');

            result.innerHTML = `
                <div class="result success">
                    <strong>üì¶ Users –≤ localStorage: ${users.length}</strong>
                    <pre>${JSON.stringify(users.map(u => ({
                        email: u.email,
                        password: u.password,
                        role: u.role,
                        name: u.name
                    })), null, 2)}</pre>
                </div>
            `;
        }

        function createDemoUsers() {
            const demoUsers = [
                {
                    id: '1',
                    email: 'patient@demo.com',
                    password: 'demo123',
                    name: 'John Smith',
                    role: 'patient',
                    dateOfBirth: '1952-03-15',
                    gender: 'male',
                    photoUrl: 'https://images.unsplash.com/photo-1758686253859-8ef7e940096e?w=400',
                    onboardingComplete: true,
                    createdAt: new Date().toISOString(),
                    patientData: {
                        id: 'p001',
                        firstName: 'John',
                        lastName: 'Smith',
                    },
                },
                {
                    id: '2',
                    email: 'caregiver@demo.com',
                    password: 'demo123',
                    name: 'Anna Johnson',
                    role: 'caregiver',
                    dateOfBirth: '1978-07-22',
                    gender: 'female',
                    onboardingComplete: true,
                    createdAt: new Date().toISOString(),
                    caregiverData: {
                        id: 'c001',
                        firstName: 'Anna',
                        lastName: 'Johnson',
                    },
                },
                {
                    id: '3',
                    email: 'doctor@demo.com',
                    password: 'demo123',
                    name: 'Dr. Rodriguez',
                    role: 'doctor',
                    dateOfBirth: '1975-11-08',
                    gender: 'male',
                    onboardingComplete: true,
                    createdAt: new Date().toISOString(),
                    doctorData: {
                        id: 'd001',
                        firstName: 'Maria',
                        lastName: 'Rodriguez',
                        specialization: 'General Practice',
                    },
                },
            ];

            localStorage.setItem('mock_users', JSON.stringify(demoUsers));
            document.getElementById('storage-result').innerHTML = `
                <div class="result success">
                    ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ 3 –¥–µ–º–æ users!
                </div>
            `;
            checkStorage();
        }

        function clearStorage() {
            localStorage.removeItem('mock_users');
            localStorage.removeItem('mock_medications');
            localStorage.removeItem('mock_dependents');
            localStorage.removeItem('mock_patients');
            document.getElementById('storage-result').innerHTML = `
                <div class="result success">
                    ‚úÖ localStorage –æ—á–∏—â–µ–Ω–æ
                </div>
            `;
        }

        function testLogin(email, password) {
            const users = JSON.parse(localStorage.getItem('mock_users') || '[]');
            const user = users.find(u => u.email === email);

            const result = document.getElementById('login-result');

            if (!user) {
                result.innerHTML = `
                    <div class="result error">
                        ‚ùå User not found: ${email}<br>
                        Available: ${users.map(u => u.email).join(', ')}
                    </div>
                `;
                return;
            }

            if (user.password !== password) {
                result.innerHTML = `
                    <div class="result error">
                        ‚ùå Wrong password<br>
                        Expected: ${user.password}<br>
                        Got: ${password}
                    </div>
                `;
                return;
            }

            result.innerHTML = `
                <div class="result success">
                    ‚úÖ –õ–æ–≥—ñ–Ω —É—Å–ø—ñ—à–Ω–∏–π!<br>
                    Email: ${user.email}<br>
                    Name: ${user.name}<br>
                    Role: ${user.role}
                </div>
            `;
        }

        // Auto-check on load
        window.onload = function() {
            checkStorage();
        };
    </script>
</body>
</html>
